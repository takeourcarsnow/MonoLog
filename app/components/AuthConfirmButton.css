:root{
  --btn-bg: #fff;
  --btn-border: #e6e9ee;
  --btn-ink: #111827;
  --accent: #2563eb; /* blue */
  --success: #10b981; /* green */
  --shadow: rgba(16,24,40,0.06);
}

.auth-confirm-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--btn-ink);
  padding: 10px 18px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 14px;
  line-height: 1;
  min-width: 160px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: transform .15s cubic-bezier(0.4, 0.0, 0.2, 1), box-shadow .15s cubic-bezier(0.4, 0.0, 0.2, 1), background .15s cubic-bezier(0.4, 0.0, 0.2, 1), color .15s cubic-bezier(0.4, 0.0, 0.2, 1);
  box-shadow: 0 6px 14px -6px var(--shadow);
  /* entrance animation so the button pops into view organically */
  animation: popIn 360ms cubic-bezier(.2,.9,.3,1);
}

.auth-confirm-btn:active{ transform: translateY(1px) scale(.997); }
.auth-confirm-btn:disabled{ opacity: .6; cursor: not-allowed; }

/* Dark mode active state color adjustment */
:root[data-theme="dark"] .auth-confirm-btn:active {
  background: color-mix(in srgb, var(--btn-bg), var(--accent) 8%);
  border-color: color-mix(in srgb, var(--btn-border), var(--accent) 20%);
}

.auth-confirm-btn .btn-inner{ display:inline-flex; gap:10px; align-items:center; }
.auth-confirm-btn .btn-icon{ display:inline-flex; width:18px; height:18px; align-items:center; justify-content:center; }
.auth-confirm-btn { --label-padding: 18px; }
.auth-confirm-btn .btn-label{ display:inline-block; transition: opacity .22s ease, transform .22s ease; }

/* New approach:
   - Keep the label in the flow but absolutely position the loader to avoid layout shifts.
   - The label crossfades to 0 opacity on loading; the loader sits centered above it.
*/
.auth-confirm-btn{ position: relative; }
.auth-confirm-btn .btn-loader-wrapper{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  transition: opacity .16s linear, transform .16s ease;
  will-change: opacity, transform;
}

/* loading state animates the text instead of showing spinner */
.auth-confirm-btn.loading{
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent), transparent 94%), color-mix(in srgb, var(--accent), transparent 97%));
  border-color: color-mix(in srgb, var(--accent), transparent 82%);
}
.auth-confirm-btn .btn-icon{ transition: transform .26s cubic-bezier(.2,.9,.3,1), opacity .18s ease; }
.auth-confirm-btn.loading .btn-label{ opacity: 0; transform: translateY(-2px); }
.auth-confirm-btn.loading .btn-icon{ display: none; }

/* show the loader wrapper when loading */
.auth-confirm-btn.loading .btn-loader-wrapper{ opacity: 1; transform: translate(-50%, -50%); }

/* center the dots in place of the label when loading */
.auth-confirm-btn .btn-loading-dots{ display:flex; gap:8px; justify-content:center; align-items:center; }
.auth-confirm-btn .btn-loading-dots .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); display:inline-block; opacity:0.2; transform: translateY(0); animation: dotPulse 900ms infinite; }
.auth-confirm-btn .btn-loading-dots .dot:nth-child(1){ animation-delay: 0ms; }
.auth-confirm-btn .btn-loading-dots .dot:nth-child(2){ animation-delay: 120ms; }
.auth-confirm-btn .btn-loading-dots .dot:nth-child(3){ animation-delay: 240ms; }


.btn-spinner{ display:inline-flex; width:18px; height:18px; align-items:center; justify-content:center; }
.btn-spinner span{ box-sizing: border-box; width:14px; height:14px; border-radius:50%; border:2px solid transparent; border-top-color:var(--accent); border-left-color:var(--accent); animation: spin 700ms linear infinite; }
@keyframes spin{ to { transform: rotate(360deg); } }

/* sent state shows green background briefly and check icon */
.auth-confirm-btn.sent{
  background: linear-gradient(90deg, color-mix(in srgb, var(--success), transparent 91%), color-mix(in srgb, var(--success), transparent 96%));
  border-color: color-mix(in srgb, var(--success), transparent 82%);
  color: var(--success);
}

/* error state shows red background and shake animation */
.auth-confirm-btn.error{
  background: var(--danger);
  border-color: var(--danger);
  color: white;
  animation: shake 0.5s ease-in-out;
}

/* Dark mode adjustments for better visibility */
:root[data-theme="dark"] .auth-confirm-btn.sent {
  background: linear-gradient(90deg, color-mix(in srgb, var(--success), transparent 70%), color-mix(in srgb, var(--success), transparent 80%));
}

/* organic hover / focus interactions */
.auth-confirm-btn:not(:disabled):hover{
  transform: translateY(-3px) scale(1.005);
  box-shadow: 0 10px 30px -10px var(--shadow);
}
.auth-confirm-btn:focus{ outline: none; box-shadow: 0 0 0 6px color-mix(in srgb, var(--accent), transparent 92%); }

/* Remove hover effects in dark mode */
:root[data-theme="dark"] .auth-confirm-btn:not(:disabled):hover {
  transform: none;
  box-shadow: none;
}

/* idle micro pulse when button is visually ready (not loading/sent) */
.auth-confirm-btn:not(.loading):not(.sent){
  animation: popIn 360ms cubic-bezier(.2,.9,.3,1);
}

/* subtle icon slide and label crossfade when loading/sent */
.auth-confirm-btn .btn-icon{ transition: transform .26s cubic-bezier(.2,.9,.3,1), opacity .18s ease; }
.auth-confirm-btn .btn-label{ transition: opacity .22s ease, transform .22s ease; }
.auth-confirm-btn.loading .btn-icon{ transform: translateX(-6px); opacity: .8; }
.auth-confirm-btn.sent .btn-icon{ transform: translateY(-1px) scale(1.02); }

/* sent check bounce */
.auth-confirm-btn.sent{ animation: checkBounce 520ms cubic-bezier(.2,.9,.3,1); }

@keyframes popIn{
  0%{ transform: translateY(8px) scale(.985); opacity: 0 }
  60%{ transform: translateY(-3px) scale(1.01); opacity: 1 }
  100%{ transform: translateY(0) scale(1); opacity: 1 }
}

@keyframes checkBounce{
  0% { transform: scale(.88); opacity: .9 }
  40% { transform: scale(1.06); }
  70% { transform: scale(.98); }
  100% { transform: scale(1); opacity: 1 }
}

@keyframes dotPulse{
  0% { opacity: 0.18; transform: translateY(0); }
  40% { opacity: 1; transform: translateY(-3px); }
  100% { opacity: 0.18; transform: translateY(0); }
}

/* avoid any width shrinking by ensuring a min-width matching current min-width */
.auth-confirm-btn{ min-width: 160px; }

@keyframes shake{
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
}

/* Sliding auth-mode indicator (under the Sign in / Sign up pills) */
.auth-toggle{ position: relative; display: inline-flex; align-items: center; }
.auth-toggle-indicator{
  position: absolute;
  top: 6px; /* small inset so the pill labels sit above */
  height: calc(100% - 12px);
  border-radius: 999px;
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent), transparent 92%), color-mix(in srgb, var(--accent), transparent 98%));
  box-shadow: 0 8px 18px -10px color-mix(in srgb, var(--accent), transparent 88%);
  transition: left .38s cubic-bezier(.2,.9,.3,1), width .38s cubic-bezier(.2,.9,.3,1), transform .38s ease, opacity .28s ease;
  transform-origin: left center;
  will-change: left, width, transform, opacity;
  z-index: 2;
  opacity: 1;
  pointer-events: none;
}

/* subtle hover lift for the indicator to match button hover */
.auth-toggle:hover .auth-toggle-indicator{ transform: translateY(-2px) scale(1.01); }

/* initial entrance animation so it doesn't pop abruptly */
.auth-toggle-indicator{ animation: indicatorIn 420ms cubic-bezier(.2,.9,.3,1); }
@keyframes indicatorIn{
  0%{ transform: translateY(6px) scale(.98); opacity: 0 }
  60%{ transform: translateY(-2px) scale(1.01); opacity: .9 }
  100%{ transform: translateY(0) scale(1); opacity: 1 }
}

/* ensure pill buttons sit above the indicator */
.auth-toggle .pill-switch{ position: relative; z-index: 5; }

/* subtle focus ring */
.auth-confirm-btn:focus{ outline: none; box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent), transparent 92%); }

/* small responsive tweak */
@media (max-width:420px){
  .auth-confirm-btn{ padding: 10px 14px; min-width: 140px; }
}

/* helper hidden text for screen readers */
.sr-only{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
