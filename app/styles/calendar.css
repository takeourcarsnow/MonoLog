/* Calendar styles */
.calendar { 
  display: grid; 
  gap: 8px; 
  width: 100%; 
  box-sizing: border-box; 
  margin-bottom: 36px;
}
.calendar-page { width: 100%; max-width: var(--maxw); margin: 0 auto; padding: 60px 12px 40px; box-sizing: border-box; }
@media (min-width: 900px) { .calendar-page { padding-left: 12px; padding-right: 12px; padding-top: 40px; padding-bottom: 20px; } }
.calendar .header {
  display: flex; justify-content: space-between; align-items: center;
  border: none; background: transparent;
  padding-left: 8px; padding-right: 8px;
}
.calendar-weekdays {
  display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px;
  font-size: 11px; color: var(--muted);
}
.calendar-grid {
  display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; width: 100%;
}
.day {
  border: 1px solid var(--border); border-radius: 10px; padding: 8px; aspect-ratio: 1;
  display: grid; align-content: space-between; background: var(--bg-elev);
  transition: transform var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
  min-width: 0;
}
.day:hover { transform: translateY(-2px); border-color: var(--primary); }
.day:focus { outline: 3px solid color-mix(in srgb, var(--primary), transparent 70%); outline-offset: 2px; }
.day .d { font-weight: 700; font-size: 13px; }
.day .d.date-anim {
  opacity: 0;
  transform: translateY(6px) scale(.995);
  will-change: transform, opacity;
  /* use a CSS var so JS can stagger each day */
  animation: dateIn 360ms var(--transition-mid) both;
  animation-delay: var(--date-delay, 0ms);
}

@keyframes dateIn {
  0% { opacity: 0; transform: translateY(6px) scale(.995); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
.day .count { position: absolute; left: 8px; bottom: 8px; font-size: 11px; color: var(--muted); background: transparent; padding: 0 6px; border-radius: 999px; pointer-events: none; }
.day.today { outline: 2px solid color-mix(in srgb, var(--accent), transparent 60%); }

/* make day a positioned container so we can add subtle indicators */
.day { position: relative; }

/* subtle indicator for days that include the current user's posts
   - keep the day's base appearance unchanged and add a small accent dot
     in the bottom-right so it's discoverable but not loud */
.day.mine::after {
  content: "";
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--accent);
  box-shadow: 0 2px 6px rgba(0,0,0,0.12);
  opacity: 0.96;
  pointer-events: none;
}

/* Legend styles used in the calendar header */
.calendar-legend .legend-dot {
  display: inline-block;
  width: 10px; height: 10px; border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
/* Removed post legend (no visual indicator) */
.calendar-legend .legend-dot.mine { background: var(--accent); }

/* selected day styling */
.day.selected { border-color: var(--primary); box-shadow: 0 8px 20px rgba(0,0,0,0.08); background: color-mix(in srgb, var(--primary-weak), transparent 86%); }

/* make selected animation a gentle scale + ring so it's obvious without being loud */
.day.selected {
  transform: translateY(-4px) scale(1.01);
  transition: transform 240ms var(--transition-mid), box-shadow 220ms var(--transition-fast), border-color 220ms var(--transition-fast);
}

/* skeleton placeholder for stats loading */
.day.skeleton { background: linear-gradient(90deg, color-mix(in srgb, var(--bg-elev), transparent 80%), color-mix(in srgb, var(--bg-elev), transparent 60%)); color: transparent; }
.day.skeleton .dot, .day.skeleton .count { opacity: 0; }

/* Today badge: small rounded pill near the date number to improve discoverability */
.today-badge {
  font-size: 11px; color: var(--primary); background: color-mix(in srgb, var(--primary-weak), transparent 68%); padding: 4px 6px; border-radius: 999px; justify-self: start; align-self: start; margin-top: 4px; font-weight: 700;
}

/* slightly larger touch targets and clearer spacing for mobile */
@media (max-width: 640px) {
  .day { padding: 10px; border-radius: 12px; }
  .calendar-grid { gap: 8px; }
  .day .d { font-size: 15px; }
  .day.has-slideshow .d { font-size: 15px; padding: 3px 6px; }
  .day .dot { top: 10px; right: 10px; }
  .mini-slideshow { top: 10px; right: 10px; }
  .day.mine::after { bottom: 10px; right: 10px; }
}

/* small dot indicator for days with posts */
/* day .dot removed - no post indicator */

/* mini slideshow for hovered days with posts */
.mini-slideshow {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 30px;
  height: 30px;
  border-radius: 4px;
  overflow: hidden;
  background: var(--bg);
  border: 1px solid var(--border);
  box-shadow: 0 2px 6px rgba(0,0,0,0.12);
}

.mini-slideshow img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
}

/* when slideshow fills the cell */
.day.has-slideshow .d {
  position: relative;
  z-index: 1;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border-radius: 4px;
  padding: 2px 4px;
  font-weight: 700;
  font-size: 13px;
  width: fit-content;
}

/* lighter visual cue for days with posts when not selected */
/* .day.has-posts removed - we no longer change day background for posts */

/* count badge - floats at bottom-left */
.day .count {
  /* absolutely position count badge so it does not change layout when it appears */
  position: absolute;
  left: 8px;
  bottom: 8px;
  font-size: 11px;
  color: var(--muted);
  background: transparent;
  padding: 0 6px;
  border-radius: 999px;
  pointer-events: none; /* non-interactive; keeps clicks targeting the day */
  white-space: nowrap;
}

/* header buttons and title improvements */
.calendar .header { gap: 8px; }
.calendar .header .btn { width: 40px; height: 40px; padding: 0; display: grid; place-items: center; border-radius: 10px; }
.calendar .header .btn:hover { background: color-mix(in srgb, var(--primary-weak), transparent 92%); border-color: color-mix(in srgb, var(--primary), transparent 80%); }
.calendar .header #title { cursor: pointer; }
.calendar .header #title:hover { text-decoration: underline; }

/* responsive tweaks: make days a bit taller on small screens for touch */
@media (max-width: 420px) {
  .day { padding: 10px; border-radius: 12px; }
  .calendar-weekdays { font-size: 12px; }
}

/* make calendar more compact on desktop */
@media (min-width: 900px) {
  .calendar { gap: 6px; }
  .calendar-grid { gap: 4px; }
  .day { padding: 6px; }
  .calendar-weekdays { gap: 4px; }
  .day .d { font-size: 12px; }
  .day.has-slideshow .d { font-size: 12px; padding: 2px 4px; }
  .day .count { font-size: 10px; left: 6px; bottom: 6px; }
  .day.mine::after { bottom: 6px; right: 6px; }
  .day .dot { top: 6px; right: 6px; }
  .mini-slideshow { top: 6px; right: 6px; }
  .calendar .header {
    position: sticky;
    top: 0;
    background: var(--bg);
    z-index: 10;
    padding-top: 10px;
    padding-bottom: 10px;
  }
}