/* Edit/Delete icon-reveal buttons: reuse the same icon reveal behavior as follow */
.edit-btn, .delete-btn {
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 600;
  /* include background, border-color and opacity so entering/exiting states animate smoothly */
  transition: transform 200ms var(--transition-mid), box-shadow 200ms var(--transition-mid), color 160ms var(--transition-fast), background 260ms var(--transition-mid), border-color 260ms var(--transition-mid), opacity 220ms var(--transition-fast);
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

/* Keep consistent icon sizing with existing helpers */
.icon-reveal .icon { width: 18px; height: 18px; }

/* Edit: subtle primary accent on the icon */
.edit-btn { border: 1px solid var(--border); background: transparent; color: var(--text); }
.edit-btn .icon { color: var(--primary); }
/* Remove hover/animation effects for the inline edit button.
   Keep visual appearance static: no translate/box-shadow/ripple/animations. */
.edit-btn:hover,
.edit-btn:focus,
.edit-btn:active {
  transform: none !important;
  box-shadow: none !important;
}
/* .edit-btn.active keeps its visual styles defined below; no empty ruleset needed. */
.edit-btn::before { display: none !important; }

/* Prevent keyframe animations on the edit button when not active/expanded
   (keep transitions so the expanded/active state can animate both in and out). */
.edit-btn:not(.active):not(.expanded),
.edit-btn:not(.active):not(.expanded) * {
  animation: none !important;
}

/* Edit button reveal behavior: show the label when the button is explicitly
   expanded (JS toggles .expanded) or when it's active (editing). Prevent
   hover/focus from revealing the label; only explicit click should. */
.edit-btn .reveal.label {
  opacity: 0 !important;
  transform: translateX(6px) scale(.98) !important;
  max-width: 0 !important;
  pointer-events: none !important;
  transition: opacity 220ms cubic-bezier(.2,.85,.2,1), transform 220ms cubic-bezier(.2,.85,.2,1), max-width 220ms cubic-bezier(.2,.85,.2,1);
}

.edit-btn:not(.active):not(.expanded):hover .reveal.label,
.edit-btn:not(.active):not(.expanded):focus .reveal.label,
.edit-btn:not(.active):not(.expanded):focus-visible .reveal.label {
  opacity: 0 !important;
  transform: translateX(6px) scale(.98) !important;
  max-width: 0 !important;
}

.edit-btn.expanded .reveal.label,
.edit-btn.active .reveal.label {
  opacity: 1 !important;
  transform: translateX(0) scale(1) !important;
  max-width: 160px !important;
  pointer-events: none !important;
  transition: opacity 220ms cubic-bezier(.2,.85,.2,1), transform 220ms cubic-bezier(.2,.85,.2,1), max-width 220ms cubic-bezier(.2,.85,.2,1) !important;
}

/* Prevent icon-reveal hover/focus effects for edit buttons */
.edit-btn.icon-reveal:hover .icon,
.edit-btn.icon-reveal:focus .icon {
  transform: none !important;
}
.edit-btn.icon-reveal:hover .reveal,
.edit-btn.icon-reveal:focus .reveal {
  transform: none !important;
  opacity: 0 !important;
  max-width: 0 !important;
}

/* When the edit UI is active, keep the edit button visible and give it a
   subtle active treatment so users can always cancel or re-open the editor. */
.edit-btn.active {
  background: color-mix(in srgb, var(--primary-weak), var(--bg) 48%);
  border-color: transparent;
  box-shadow: 0 10px 28px color-mix(in srgb, var(--primary), transparent 72%);
  transform: translateY(-2px);
}
.edit-btn.active .icon { color: var(--primary); }

/* small entrance animation for edit active state */
@keyframes editActiveIn {
  0% { transform: translateY(0.6px) scale(.996); opacity: 0; }
  60% { transform: translateY(-4px) scale(1.03); opacity: 1; }
 100% { transform: translateY(-2px) scale(1); opacity: 1; }
}
.edit-btn.active {
  animation: editActiveIn 260ms cubic-bezier(.2,.9,.28,1) both;
}

/* Strong override: Edit button should only show its label when explicitly
   expanded (JS) or when editing (active). Ignore hover entirely so the
   label doesn't toggle on pointer moves. This block must come after the
   generic icon-reveal rules to win the cascade. */
.edit-btn .reveal.label {
  opacity: 0 !important;
  transform: translateX(6px) scale(.98) !important;
  max-width: 0 !important;
  pointer-events: none !important;
  transition: opacity 220ms cubic-bezier(.2,.85,.2,1), transform 220ms cubic-bezier(.2,.85,.2,1), max-width 220ms cubic-bezier(.2,.85,.2,1) !important;
}

/* Prevent hover/focus from revealing the label for edit buttons */
.edit-btn:hover .reveal.label,
.edit-btn:focus .reveal.label,
.edit-btn:focus-visible .reveal.label {
  opacity: 0 !important;
  transform: translateX(6px) scale(.98) !important;
  max-width: 0 !important;
}

/* Reveal label only when explicitly expanded or when editing */
.edit-btn.expanded .reveal.label,
.edit-btn.active .reveal.label {
  opacity: 1 !important;
  transform: translateX(0) scale(1) !important;
  max-width: 160px !important;
  pointer-events: none !important;
  transition: opacity 220ms cubic-bezier(.2,.85,.2,1), transform 220ms cubic-bezier(.2,.85,.2,1), max-width 220ms cubic-bezier(.2,.85,.2,1) !important;
}

/* Hide mouse-focus halo but preserve keyboard focus visibility */
.edit-btn:focus:not(:focus-visible),
.delete-btn:focus:not(:focus-visible) {
  outline: none !important;
  box-shadow: none !important;
}
.edit-btn:focus:not(:focus-visible)::after,
.delete-btn:focus:not(:focus-visible)::after {
  box-shadow: none !important;
}

/* ------------------------------------------------------------------
   Make edit/delete buttons behave like follow-style buttons: remove
   visible outline/halo/pseudo-elements so they don't show the blue/colored
   ring on mouse/touch interactions. This preserves their active/confirming
   visual states but prevents the extra ring/outline that was previously
   appearing on posts.
 ------------------------------------------------------------------ */
.edit-btn,
.delete-btn,
button.edit-btn,
button.delete-btn,
.card .edit-btn,
.card .delete-btn,
.profile-actions .edit-btn,
.profile-actions .delete-btn {
  border: none !important;
  border-color: transparent !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
  background: transparent !important;
  outline: none !important;
  background-clip: padding-box !important;
}

/* Hide any pseudo-elements that can draw a ring/halo around the button */
.edit-btn::after, .edit-btn::before,
.delete-btn::after, .delete-btn::before,
.card .edit-btn::after, .edit-btn::before,
.card .delete-btn::after, .delete-btn::before,
.profile-actions .edit-btn::after, .edit-btn::before,
.profile-actions .delete-btn::after, .delete-btn::before {
  display: none !important;
  content: none !important;
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
  opacity: 0 !important;
}

/* Also ensure focus halos are suppressed for both mouse/touch and keyboard
   interactions to match the follow button behavior requested. */
.edit-btn:focus,
.edit-btn:focus-visible,
.delete-btn:focus,
.delete-btn:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

@media (prefers-reduced-motion: reduce) {
  .edit-btn, .delete-btn { transition: none !important; animation: none !important; }
}

@media (prefers-reduced-motion: reduce) {
  /* Ensure our small state animations are suppressed for reduced-motion users */
  .edit-btn.active, .delete-btn.confirming { animation: none !important; }
}