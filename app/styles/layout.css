.content {
  max-width: var(--maxw);
  margin: 0 auto;
  width: 100%;
  /* Make content scrollable within viewport */
  height: 100dvh;
  /* Let swiper handle scrolling */
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
  /* Reserve top space for fixed header */
  padding: var(--header-height, calc(48px + var(--safe-top, 0px) + 12px + 8px)) 12px calc(var(--tabbar-height, 64px) + 12px);
}
.upload-empty .content { padding-bottom: calc(28px + var(--safe-bottom)); }

/* Ensure the main content area expands to fill the viewport when there's
   little content. Use a min-height that subtracts the header and tabbar if
   the JS sets --header-height and --tabbar-height. Fallback to 100% so
   behavior remains unchanged when variables are not set. */
.content {
  /* Let the main content area fill the viewport minus the fixed header.
     The tabbar is a fixed overlay; give slides 100% height of .content and
     apply bottom padding to slide children so content isn't hidden. */
  min-height: calc(100dvh - var(--header-height, calc(48px + var(--safe-top, 0px) + 12px + 8px)) - var(--tabbar-height, 56px));
}
*** End Patch

/* Strong page-level override when uploader has an active preview (JS toggles
  `body.uploader-has-preview`). This lives immediately after the base
  `.content` so it reliably overrides earlier padding. Adjust to taste. */
body.uploader-has-preview .content {
  padding-bottom: calc(28px + var(--safe-bottom)) !important;
}

/* Debug outline: add `document.body.classList.add('debug-uploader-outline')`
  in browser console to reveal outlines for the main containers while
  debugging the remaining vertical gap. Remove the class when done. */
body.debug-uploader-outline .content { outline: 3px dashed rgba(255,0,0,0.95); }
body.debug-uploader-outline .uploader { outline: 3px dashed rgba(0,200,0,0.95); }

/* Page slide: support swipe-to-navigate with smooth transforms. We keep
   a single .page-slide element and animate its transform/opacity on
   navigation or during pointer/touch drags. Respect prefers-reduced-motion
   by disabling translations for users who opt out. */
.content > .page-slide {
  position: relative;
  will-change: transform, opacity;
  transition: transform .26s var(--transition-mid), opacity .26s var(--transition-mid);
  transform: translateX(0);
}

/* directional classes used by JS navigation (enter/exit states) */
.content.slide-left > .page-slide { transform: translateX(-100%); opacity: 0.92; }
.content.slide-right > .page-slide { transform: translateX(100%); opacity: 0.92; }
.content.slide-enter-left > .page-slide { transform: translateX(100%); }
.content.slide-enter-right > .page-slide { transform: translateX(-100%); }

@media (prefers-reduced-motion: reduce) {
  .content > .page-slide { transition: opacity 120ms linear; transform: none !important; }
}