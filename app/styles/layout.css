.content {
  max-width: var(--maxw);
  margin: 0 auto;
  width: 100%;
  /* Let the content size itself to its children so each section is only as
     tall as it needs to be. The page body will handle overall scrolling. */
  height: auto;
  overflow: visible;
  -webkit-overflow-scrolling: touch;
  /* Reserve top space for fixed header; keep modest bottom padding only. */
  padding: var(--header-height, calc(48px + var(--safe-top, 0px) + 12px + 8px)) 12px 12px;
}
.upload-empty .content { padding-bottom: calc(28px + var(--safe-bottom)); }
*** End Patch

/* Strong page-level override when uploader has an active preview (JS toggles
  `body.uploader-has-preview`). This lives immediately after the base
  `.content` so it reliably overrides earlier padding. Adjust to taste. */
body.uploader-has-preview .content {
  padding-bottom: calc(28px + var(--safe-bottom)) !important;
}

/* Debug outline: add `document.body.classList.add('debug-uploader-outline')`
  in browser console to reveal outlines for the main containers while
  debugging the remaining vertical gap. Remove the class when done. */
body.debug-uploader-outline .content { outline: 3px dashed rgba(255,0,0,0.95); }
body.debug-uploader-outline .uploader { outline: 3px dashed rgba(0,200,0,0.95); }

/* Page slide: support swipe-to-navigate with smooth transforms. We keep
   a single .page-slide element and animate its transform/opacity on
   navigation or during pointer/touch drags. Respect prefers-reduced-motion
   by disabling translations for users who opt out. */
.content > .page-slide {
  position: relative;
  will-change: transform, opacity;
  transition: transform .26s var(--transition-mid), opacity .26s var(--transition-mid);
  transform: translateX(0);
}

/* directional classes used by JS navigation (enter/exit states) */
.content.slide-left > .page-slide { transform: translateX(-100%); opacity: 0.92; }
.content.slide-right > .page-slide { transform: translateX(100%); opacity: 0.92; }
.content.slide-enter-left > .page-slide { transform: translateX(100%); }
.content.slide-enter-right > .page-slide { transform: translateX(-100%); }

@media (prefers-reduced-motion: reduce) {
  .content > .page-slide { transition: opacity 120ms linear; transform: none !important; }
}

/* Desktop: no forced heights so sections size to content (body scrolls). */
@media (min-width: 900px) {
  .content { min-height: 0; }
}

/* Mobile-specific global adjustments */
@media (max-width: 768px) {
  /* Mobile: allow content to grow; body will scroll. Keep a small bottom gap
     to avoid content touching the tabbar, but don't force full viewport height. */
  .content {
    height: auto;
    overflow: visible;
    -webkit-overflow-scrolling: touch;
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);
  }
  /* Push the server-rendered about-card above the fixed tabbar on phones.
     Uses --about-bottom-gap set by the About page (falls back to --tabbar-height). */
  .about-card {
    margin-bottom: var(--about-bottom-gap, calc(var(--tabbar-height, 64px) + 24px));
  }
}