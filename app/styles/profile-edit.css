/* Simplified edit profile overlay panel */
.edit-panel {
  position: absolute;
  left: 50%;
  top: calc(100% + 8px);
  transform: translateX(-50%) translateY(-6px) scale(.995);
  background: var(--bg);
  border: 1px solid var(--border);
  padding: 12px;
  border-radius: 10px;
  box-shadow: var(--shadow);
  z-index: 100002;
  width: 360px;
  opacity: 0;
  transition: opacity 200ms var(--transition-fast), transform 200ms var(--transition-fast);
  animation: popIn 220ms var(--transition-mid) both;
  max-height: calc(100vh - 120px);
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* caret arrow pointing to the actions group */
.edit-panel::before {
  content: "";
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 14px;
  height: 14px;
  background: var(--bg);
  border-left: 1px solid var(--border);
  border-top: 1px solid var(--border);
  box-shadow: -2px -2px 6px rgba(0,0,0,0.04);
}

/* Mobile: center in viewport */
@media (max-width: 680px) {
  .edit-panel {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: min(94vw, 420px);
    max-height: calc(100vh - 120px);
    border-radius: 12px;
    z-index: 99999;
  }

  .edit-panel::before {
    display: none;
  }

  .edit-panel .edit-actions {
    position: sticky;
    bottom: 8px;
    margin-top: 8px;
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  .edit-panel .input,
  .edit-panel .bio-editor {
    padding: 8px;
    font-size: 14px;
    text-align: left;
  }

  .edit-panel .edit-actions .btn {
    padding: 6px 10px;
    font-size: 13px;
  }
}

@keyframes popIn {
  from { opacity: 0; transform: translateX(-50%) translateY(-8px) scale(.98); }
  to { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
}

/* Small screens: anchor the edit panel as a compact popover from the
   profile actions area so it doesn't cover a large portion of the grid.
   Cap the height so it never dominates the screen; make inner content
   scrollable and keep the caret/arrow visible. */
@media (max-width: 680px) {
  .profile-header { position: relative; }

  /* Keep cancel button compact instead of stretching full width */
  .btn-group .btn.cancel-btn { width: auto; align-self: center; padding-left: 18px; padding-right: 18px; min-width: 120px; }
  .edit-panel {
   /* center in viewport on small screens so the popover never appears off-center
     when the actions container flows or wraps. Use fixed to avoid ancestor
     overflow/scrolling issues and ensure it sits above the header. */
   position: fixed;
   left: 50%;
   top: 50%;
   transform: translate(-50%, -50%);
   /* Allow the panel to be noticeably wider on modern phones while capping
     at a comfortable maximum so desktop/tablet layouts are unaffected. */
   width: min(94vw, 420px);
   /* Increase max-height so taller phones can show more content before scrolling */
   max-height: calc(100vh - 120px);
   overflow: auto;
   box-shadow: var(--shadow);
   border: 1px solid var(--border);
   background: var(--bg);
   padding: 12px;
   border-radius: 12px;
   z-index: 99999;
   animation: popIn 220ms var(--transition-mid) both;
   display: flex;
   flex-direction: column;
  }

  .edit-panel::before {
    /* hide caret when centered in viewport */
    display: none;
  }

  /* make the content area scroll if needed, keep actions visible */
  .edit-panel > :not(.edit-actions) {
    flex: 1 1 auto;
    overflow: auto;
  }

  .edit-panel .edit-actions {
    position: sticky;
    bottom: 8px;
    margin-top: 8px;
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    z-index: 2;
  }

  /* Slightly tighter spacing inside the popover so more fields fit */
  .edit-panel .input,
  .edit-panel .bio-editor { padding: 8px; font-size: 14px; }

  .edit-panel .edit-actions .btn { padding: 6px 10px; font-size: 13px; }
}

/* Simplified social drawer - always visible */
.social-backdrop { display: none; }

.social-drawer {
  position: relative;
}

/* Simplified grid layout - single column */
.grid-cols {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 6px;
}

.grid-cols .full-width {
  width: 100%;
}

/* Simplified inline edit card - always single column */
.inline-edit-card {
  position: relative;
  background: var(--bg-elev);
  border: 1px solid var(--border);
  padding: 14px;
  border-radius: 12px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.22);
  transition: opacity 200ms ease, transform 200ms ease;
  opacity: 0;
  transform: translateY(-4px) scale(0.995);
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 720px;
}

.inline-edit-card.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.inline-edit-card.closing {
  opacity: 0;
  transform: translateY(-4px) scale(0.995);
}

.inline-edit-card .input,
.inline-edit-card .bio-editor {
  width: 100%;
  text-align: left;
}

.inline-edit-card .input {
  padding-right: 60px; /* Make room for the cooldown indicator */
  padding-left: 32px; /* Make room for social media icons */
}

.inline-edit-card .bio-editor {
  min-height: 64px;
  box-sizing: border-box;
}

/* Bio editor container and character count positioning */
.bio-editor-container {
  position: relative;
}

.bio-char-count {
  position: absolute;
  bottom: 8px;
  right: 8px;
  font-size: 11px;
  color: var(--muted);
  background: var(--bg);
  padding: 2px 4px;
  border-radius: 4px;
  pointer-events: none;
}

/* Input container and indicator positioning */
.input-container {
  position: relative;
}

.input-indicator {
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  font-size: 12px;
  color: var(--muted);
  pointer-events: none;
}

.input-icon {
  position: absolute;
  top: 50%;
  left: 8px;
  transform: translateY(-50%);
  color: var(--muted);
  pointer-events: none;
}

/* Mobile adjustments */
@media (max-width: 680px) {
  .inline-edit-card {
    padding: 16px;
    max-height: 70vh;
    overflow: auto;
  }

  .inline-edit-card .input,
  .inline-edit-card .bio-editor {
    padding: 10px;
    font-size: 14px;
    text-align: center;
  }

  .inline-edit-card .input {
    padding-right: 60px; /* Make room for the cooldown indicator */
    padding-left: 32px; /* Make room for social media icons */
  }

  .inline-edit-card .input::placeholder {
    text-align: center;
  }
}

/* New helper classes for the edit form */
.label-group { display: block; margin-bottom: 10px; }
.muted-label { font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.label-row { display: flex; justify-content: space-between; align-items: baseline; gap: 8px; margin-bottom: 6px; }
.small-muted { font-size: 11px; color: var(--muted); }
.field-helper { margin-top: 6px; font-size: 12px; color: var(--muted); }

.warning-note { margin-top: 8px; padding: 8px 10px; background: rgba(255,165,0,0.08); border: 1px solid rgba(255,165,0,0.22); border-radius: 8px; display: flex; gap: 8px; align-items: flex-start; }
.warning-emoji { font-size: 14px; line-height: 1; }

.edit-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; }
.btn { padding: 8px 12px; border-radius: 8px; border: 1px solid transparent; cursor: pointer; }
.btn.primary { background: var(--accent); color: white; border-color: rgba(0,0,0,0.06); }
.btn.secondary { background: transparent; color: var(--text); border: 1px solid var(--border); }
.btn:disabled { opacity: 0.6; cursor: default; }

/* Screen-reader only helper (visually hidden but accessible) */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Colorized icons for social inputs when a valid-looking value is present */
.input-icon.twitter-filled { color: #1DA1F2; } /* Twitter blue */
.input-icon.instagram-filled { color: #E1306C; } /* Instagram gradient pink (single color variant) */
.input-icon.github-filled { color: #000000; } /* GitHub black */
.input-icon.facebook-filled { color: #1877F2; } /* Facebook blue */
.input-icon.website-filled { color: var(--primary); } /* generic site color */